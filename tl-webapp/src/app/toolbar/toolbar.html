<mat-toolbar>
  <mat-toolbar-row>
    <div class="title">
      @if (config.showReturnArrow) {
        <button mat-icon-button (click)="onReturnArrowClick()" id="back-button">
          <mat-icon>arrow_back</mat-icon>
        </button>
      }

      <!--    TODO add link to home page-->
      <span>{{ (config.titlePath || '') | transloco }}</span>
    </div>

    <div class="center">
      @if (config.center) {
        <ng-container *ngTemplateOutlet="config.center"/>
      }
    </div>

    <div class="buttons">
      @if (config.buttons) {
        <ng-container *ngTemplateOutlet="config.buttons"/>
      }
      @if (!config.buttons || config.mergeButtons) {
        @if (isLoggedIn) {
          <div style="width: 0.75rem"></div>
          <button mat-icon-button [matMenuTriggerFor]="userMenu" id="user-menu-button">
            <ngx-avatars
              name="{{ userName }}"
              size="32"
              [round]="true"
            ></ngx-avatars>
          </button>
          <mat-menu #userMenu="matMenu">
            <mat-slide-toggle labelPosition="before" [formControl]="darkModeControl" (change)="onDarkModeChange($event)" (click)="$event.stopPropagation()">
              {{ `${TOOLBAR_PATH}.darkModeToggle` | transloco }}
            </mat-slide-toggle>
            <mat-divider></mat-divider>
            <button mat-menu-item routerLink="/logout">
              <mat-icon>logout</mat-icon>
              <span>{{ `${TOOLBAR_PATH}.logoutButton` | transloco }}</span>
            </button>
          </mat-menu>
        } @else {
          <button mat-button routerLink="/register">{{ `${TOOLBAR_PATH}.registerButton` | transloco }}</button>
          <button mat-button routerLink="/login">{{ `${TOOLBAR_PATH}.loginButton` | transloco }}</button>
        }
      }
    </div>
  </mat-toolbar-row>
</mat-toolbar>
